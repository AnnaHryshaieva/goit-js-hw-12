{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchPictures(inputValue, currentPage) {\n  const res = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '34206508-2ad29bd7e91dc1db4e67bd855',\n      q: inputValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: 15,\n    },\n  });\n\n  return res.data;\n}\n","function template(arr) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = arr;\n\n  return `<li class=\"gallery-item\">\n  <a href=\"${largeImageURL}\">\n    <img src=\"${webformatURL}\" class=\"gallery-image\" alt=\"${tags}\" />\n  </a>\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes</b> </br>${likes}\n    </p>\n    <p class=\"info-item\">\n      <b>Views</b> </br>${views}\n    </p>\n    <p class=\"info-item\">\n      <b>Comments</b> </br>${comments}\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads</b> </br>${downloads}\n    </p>\n  </div>\n</li>`;\n}\n\nexport function templateGalleries(array) {\n  return array.map(template).join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchPictures } from './js/pixabay-api.js';\nimport { templateGalleries } from './js/render-functions.js';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  loader: document.querySelector('.load'),\n  myGallery: document.querySelector('.gallery'),\n  btn: document.querySelector('.btn'),\n};\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet inputValue;\nlet page;\nlet maxPage;\n\nrefs.form.addEventListener('submit', onSubmit);\nrefs.btn.addEventListener('click', onClick);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n\n  inputValue = event.target.elements.search.value.trim();\n\n  page = 1;\n\n  if (inputValue === '') {\n    return;\n  }\n\n  showLoader();\n\n  const response = await fetchPictures(inputValue, page);\n\n  if (response.hits.length === 0) {\n    error();\n  }\n\n  maxPage = Math.ceil(response.totalHits / 15);\n\n  refs.myGallery.innerHTML = '';\n\n  renderGalleries(response.hits);\n\n  hideLoader();\n\n  checkClassList();\n\n  event.target.reset();\n}\n\nasync function onClick() {\n  page += 1;\n\n  showLoader();\n\n  const response = await fetchPictures(inputValue, page);\n\n  renderGalleries(response.hits);\n\n  hideLoader();\n\n  checkClassList();\n\n  const height =\n    refs.myGallery.firstElementChild.getBoundingClientRect().height;\n\n  scrollBy({\n    behavior: 'smooth',\n    top: height * 2,\n  });\n\n  if (refs.myGallery.children.length === response.totalHits) {\n    messageInfo();\n  }\n}\n\nfunction error() {\n  iziToast.error({\n    position: 'topRight',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n\nfunction messageInfo() {\n  iziToast.info({\n    position: 'topRight',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n}\n\nfunction renderGalleries(array) {\n  const markup = templateGalleries(array);\n\n  refs.myGallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\n\nfunction showLoader() {\n  refs.loader.classList.add('loader');\n}\n\nfunction hideLoader() {\n  if (refs.loader) {\n    refs.loader.classList.remove('loader');\n  }\n}\n\nfunction showLoadBtn() {\n  refs.btn.classList.remove('hidden');\n}\n\nfunction hideLoadBtn() {\n  refs.btn.classList.add('hidden');\n}\n\nfunction checkClassList() {\n  if (page >= maxPage) {\n    hideLoadBtn();\n  } else {\n    showLoadBtn();\n  }\n}\n"],"names":["fetchPictures","inputValue","currentPage","axios","template","arr","largeImageURL","webformatURL","tags","likes","views","comments","downloads","templateGalleries","array","refs","lightbox","SimpleLightbox","page","maxPage","onSubmit","onClick","event","showLoader","response","error","renderGalleries","hideLoader","checkClassList","height","messageInfo","iziToast","markup","showLoadBtn","hideLoadBtn"],"mappings":"owBAEO,eAAeA,EAAcC,EAAYC,EAAa,CAa3D,OAZY,MAAMC,EAAM,IAAI,2BAA4B,CACtD,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACL,CAAG,GAEU,IACb,CChBA,SAASE,EAASC,EAAK,CACrB,KAAM,CACJ,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EAEJ,MAAO;AAAA,aACIC,CAAa;AAAA,gBACVC,CAAY,gCAAgCC,CAAI;AAAA;AAAA;AAAA;AAAA,0BAItCC,CAAK;AAAA;AAAA;AAAA,0BAGLC,CAAK;AAAA;AAAA;AAAA,6BAGFC,CAAQ;AAAA;AAAA;AAAA,8BAGPC,CAAS;AAAA;AAAA;AAAA,MAIvC,CAEO,SAASC,EAAkBC,EAAO,CACvC,OAAOA,EAAM,IAAIV,CAAQ,EAAE,KAAK,EAAE,CACpC,CC1BA,MAAMW,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,OAAQ,SAAS,cAAc,OAAO,EACtC,UAAW,SAAS,cAAc,UAAU,EAC5C,IAAK,SAAS,cAAc,MAAM,CACpC,EAEMC,EAAW,IAAIC,EAAe,aAAc,CAChD,YAAa,OACb,aAAc,MACd,aAAc,GAChB,CAAC,EAED,IAAIhB,EACAiB,EACAC,EAEJJ,EAAK,KAAK,iBAAiB,SAAUK,CAAQ,EAC7CL,EAAK,IAAI,iBAAiB,QAASM,CAAO,EAE1C,eAAeD,EAASE,EAAO,CAO7B,GANAA,EAAM,eAAc,EAEpBrB,EAAaqB,EAAM,OAAO,SAAS,OAAO,MAAM,OAEhDJ,EAAO,EAEHjB,IAAe,GACjB,OAGFsB,IAEA,MAAMC,EAAW,MAAMxB,EAAcC,EAAYiB,CAAI,EAEjDM,EAAS,KAAK,SAAW,GAC3BC,IAGFN,EAAU,KAAK,KAAKK,EAAS,UAAY,EAAE,EAE3CT,EAAK,UAAU,UAAY,GAE3BW,EAAgBF,EAAS,IAAI,EAE7BG,IAEAC,IAEAN,EAAM,OAAO,OACf,CAEA,eAAeD,GAAU,CACvBH,GAAQ,EAERK,IAEA,MAAMC,EAAW,MAAMxB,EAAcC,EAAYiB,CAAI,EAErDQ,EAAgBF,EAAS,IAAI,EAE7BG,IAEAC,IAEA,MAAMC,EACJd,EAAK,UAAU,kBAAkB,sBAAqB,EAAG,OAE3D,SAAS,CACP,SAAU,SACV,IAAKc,EAAS,CAClB,CAAG,EAEGd,EAAK,UAAU,SAAS,SAAWS,EAAS,WAC9CM,GAEJ,CAEA,SAASL,GAAQ,CACfM,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACN,CAAG,CACH,CAEA,SAASD,GAAc,CACrBC,EAAS,KAAK,CACZ,SAAU,WACV,QAAS,4DACb,CAAG,CACH,CAEA,SAASL,EAAgBZ,EAAO,CAC9B,MAAMkB,EAASnB,EAAkBC,CAAK,EAEtCC,EAAK,UAAU,mBAAmB,YAAaiB,CAAM,EAErDhB,EAAS,QAAO,CAClB,CAEA,SAASO,GAAa,CACpBR,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CAEA,SAASY,GAAa,CAChBZ,EAAK,QACPA,EAAK,OAAO,UAAU,OAAO,QAAQ,CAEzC,CAEA,SAASkB,GAAc,CACrBlB,EAAK,IAAI,UAAU,OAAO,QAAQ,CACpC,CAEA,SAASmB,GAAc,CACrBnB,EAAK,IAAI,UAAU,IAAI,QAAQ,CACjC,CAEA,SAASa,GAAiB,CACpBV,GAAQC,EACVe,IAEAD,GAEJ"}